<extend name="public/template" />
<block name="headerlink">
	<!-- BEGIN PAGE LEVEL STYLES -->
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/select2/select2.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-datepicker/css/datepicker.css"/>
	<!-- END PAGE LEVEL STYLES -->
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/clockface/css/clockface.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-datepicker/css/datepicker3.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-timepicker/css/bootstrap-timepicker.min.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-colorpicker/css/colorpicker.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-daterangepicker/daterangepicker-bs3.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css"/>
	<link rel="stylesheet" type="text/css" href="__PUBLIC__/metronic3_7/assets/admin/pages/css/pagecode.css"/>
</block>
<block name="siderbarmenu">
	<ul class="page-sidebar-menu " data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200">
		<!-- DOC: To remove the sidebar toggler from the sidebar you just need to completely remove the below "sidebar-toggler-wrapper" LI element -->
		<li class="sidebar-toggler-wrapper">
			<!-- BEGIN SIDEBAR TOGGLER BUTTON -->
			<div class="sidebar-toggler">
			</div>
			<!-- END SIDEBAR TOGGLER BUTTON -->
		</li>
		<!-- DOC: To remove the search box from the sidebar you just need to completely remove the below "sidebar-search-wrapper" LI element -->
		<li class="sidebar-search-wrapper">
			<!-- BEGIN RESPONSIVE QUICK SEARCH FORM -->
			<!-- DOC: Apply "sidebar-search-bordered" class the below search form to have bordered search box -->
			<!-- DOC: Apply "sidebar-search-bordered sidebar-search-solid" class the below search form to have bordered & solid search box -->
			<form class="sidebar-search " action="extra_search.html" method="POST">
				<a href="javascript:;" class="remove">
				<i class="icon-close"></i>
				</a>
				<div class="input-group">
					<input type="text" class="form-control" placeholder="Search...">
					<span class="input-group-btn">
					<a href="javascript:;" class="btn submit"><i class="icon-magnifier"></i></a>
					</span>
				</div>
			</form>
			<!-- END RESPONSIVE QUICK SEARCH FORM -->
		</li>
		<li class="start">
			<a href="javascript:;">
			<i class="icon-home"></i>
			<span class="title">Dashboard</span>
			<span class="selected"></span>
			<span class="arrow open"></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="{:U('Dashboard/index');}">
					<i class="icon-bar-chart"></i>
					Default Dashboard</a>
				</li>
			</ul>
		</li>
		<li class="active open">
			<a href="javascript:;">
			<i class="icon-basket"></i>
			<span class="title">eCommerce</span>
			<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="ecommerce_index.html">
					<i class="icon-home"></i>
					Dashboard</a>
				</li>
				<li>
					<a href="{:U('Order/orderlist_ongoing');}">
					<i class="icon-bell"></i>
					<span class="badge badge-danger">{$cin}</span>
					Orders Ongoing</a>
				</li>
				<li class="active">
					<a href="{:U('Order/orderlist?flag=3');}">
					<i class="icon-basket"></i>
					Orders All</a>
				</li>
				<li>
					<a href="#">
						<i class="icon-bar-chart"></i>
						Data Analysis
					</a>
				</li>
			</ul>
		</li>
		<li>
			<a href="javascript:;">
				<i class="fa fa-code"></i>
				<span class="title">Workers</span>
				<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="ecommerce_index.html">
					<i class="icon-home"></i>
					Dashboard</a>
				</li>
				<li>
					<a href="{:U('Worker/workerlist');}">
						<i class="icon-basket"></i>
						Workers
					</a>
				</li>
				<li>
					<a href="#">
						<i class="icon-bar-chart"></i>
						Data Analysis
					</a>
				</li>
			</ul>
		</li>
		<li>
			<a href="javascript:;">
			<i class="icon-settings"></i>
			<span class="title">Configuration</span>
			<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="form_controls.html">
						Exchange Rate
					</a>
				</li>
				<li>
					<a href="form_controls_md.html">
						Technologies Conf
					</a>
				</li>

			</ul>
		</li>
		<li>
			<a href="javascript:;">
			<i class="icon-settings"></i>
			<span class="title">Configuration</span>
			<span class="arrow "></span>
			</a>
			<ul class="sub-menu">
				<li>
					<a href="form_controls.html">
						Exchange Rate
					</a>
				</li>
				<li>
					<a href="form_controls_md.html">
						Technologies Conf
					</a>
				</li>

			</ul>
		</li>
	</ul>
</block>
<block name="container">
	<div class="page-content">
			<!-- BEGIN PAGE HEADER-->
			<h3 class="page-title">
			Orders All <small> orders listing</small>
			</h3>
			<div class="page-bar">
				<ul class="page-breadcrumb">
					<li>
						<i class="fa fa-home"></i>
						<a href="index.html">Home</a>
						<i class="fa fa-angle-right"></i>
					</li>
					<li>
						<a href="#">eCommerce</a>
						<i class="fa fa-angle-right"></i>
					</li>
					<li>
						<a href="{:U('Order/orderlist?flag=3');}">Orders All</a>
					</li>
				</ul>
				<div class="page-toolbar">
					<div class="btn-group pull-right">
						<button type="button" class="btn btn-fit-height grey-salt dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-delay="1000" data-close-others="true">
						Actions <i class="fa fa-angle-down"></i>
						</button>
						<ul class="dropdown-menu pull-right" role="menu">
							<li>
								<a href="#">Action</a>
							</li>
							<li>
								<a href="#">Another action</a>
							</li>
							<li>
								<a href="#">Something else here</a>
							</li>
							<li class="divider">
							</li>
							<li>
								<a href="#">Separated link</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
			<!-- END PAGE HEADER-->
			<!-- BEGIN PAGE CONTENT-->
			<div class="row">
				<div class="col-md-12">
					<!-- Begin: life time stats -->
					<div class="portlet">
						<div class="portlet-title">
							<div class="caption">
								<i class="fa fa-shopping-cart"></i>All Orders Listing
							</div>
							<div class="actions">
								<a href="{:U('Order/orderaddpage');}" class="btn default yellow-stripe">
									<i class="fa fa-plus"></i>
									<span class="hidden-480"> New Order </span>
								</a>
								<div class="btn-group">
									<a class="btn default yellow-stripe dropdown-toggle" href="javascript:;" data-toggle="dropdown">
									<i class="fa fa-share"></i>
									<span class="hidden-480">
									Tools </span>
									<i class="fa fa-angle-down"></i>
									</a>
									<ul class="dropdown-menu pull-right">
										<li>
											<a href="javascript:;">
											Export to Excel </a>
										</li>
										<li>
											<a href="javascript:;">
											Export to CSV </a>
										</li>
										<li>
											<a href="javascript:;">
											Export to XML </a>
										</li>
										<li class="divider">
										</li>
										<li>
											<a href="javascript:;">
											Print Invoices </a>
										</li>
									</ul>
								</div>
							</div>
						</div>
						<div class="portlet-body">
							<div class="table-container">
								<div class="row">
									<form role="form" action="{:U('Order/orderlist?p=1');}" method="GET">
									<div class="col-md-12 col-sm-12">
										<div class="form-group">
											<div class="col-md-2 col-sm-12">
													<select name="flag" class="form-control">
														<if condition="$fflag eq 1 ">
															<option value="3">All orders</option>
															<option value="1" selected>Complete orders</option>
															<option value="2">Ongoing orders</option>
														<elseif condition="$fflag eq 2 " />
															<option value="3">All orders</option>
															<option value="1" >Complete orders</option>
															<option value="2" selected>Ongoing orders</option>
														<elseif condition="$fflag eq 3 " />
															<option value="3" selected>All orders</option>
															<option value="1" >Complete orders</option>
															<option value="2">Ongoing orders</option>
														<else />
															<option value="3">All orders</option>
															<option value="1">Complete orders</option>
															<option value="2">Ongoing orders</option>
														</if>

													</select>

												<!-- /input-group -->
											</div>
											<div class="col-md-3 col-sm-12">
												<div class="input-group date form_meridian_date" data-date="2012-12-21T15:25:00Z">
													<input name="fromdate" type="text" size="10" class="form-control input-inline" placeholder="From" value="{$newfrom}" readonly>
													<span class="input-group-btn">
													<button class="btn default date-reset" type="button"><i class="fa fa-times"></i></button>
													<button class="btn default date-set" type="button"><i class="fa fa-calendar"></i></button>
													</span>
												</div>
												<!-- /input-group -->
											</div>
											<div class="col-md-3 col-sm-12">
												<div class="input-group date form_meridian_date" data-date="2012-12-21T15:25:00Z">
													<input name="todate" type="text" size="10" class="form-control input-inline" placeholder="To" value="{$newto}" readonly>
													<span class="input-group-btn">
													<button class="btn default date-reset" type="button"><i class="fa fa-times"></i></button>
													<button class="btn default date-set" type="button"><i class="fa fa-calendar"></i></button>
													</span>
												</div>
												<!-- /input-group -->
											</div>
											<div class="col-md-4 col-sm-12">
												<button class="btn yellow table-group-action-submit"><i class="fa fa-search"></i> Search</button>
												<a class="btn red filter-cancel" type="reset" href="{:U('Order/orderlist?p=1');}"><i class="fa fa-times"></i> Reset</a>
												<!-- /input-group -->
											</div>
										</div>
									</div>
									</form>
								</div>
								<div class="table-scrollable">
									<table class="table table-striped table-bordered table-hover  " id="datatable_orders">
									<thead>
									<tr role="row" class="heading">
										<th width="2%"></th>
										<th width="8%">Create Date</th>
										<th width="12%"><i class="fa fa-wechat font-green"></i> Guest Wechat</th>
										<th >Project</th>
										<th width="8%">G_Deadline</th>
										<th width="10%">Payment</th>
										<th width="12%"><i class="fa fa-wechat font-red"></i> Worker Wechat</th>
										<th width="10%">W_deadline</th>
										<th width="10%">Worker status</th>
										<th width="12%">Actions</th>
									</tr>
									</thead>
									<!--
										0. guest have no paid gurrentee
										1. guest have paid gurrentee
										2. guest have pain all money
									-->
									<!--
										0. no
										1. worker is doing
										2. worker has completed and no pay
										3. worker has completed and paid
									-->
									<tbody>
										<foreach name="orders" item="vo">
											<if condition="($vo.g_state eq 2) AND ($vo.w_state eq 3) ">
												<tr role="row" class="danger">
													<td><i class="fa fa-check-square-o font-red"></i></td>
											<else />
												<tr role="row">
													<td><i class="fa fa-bug font-green"></i></td>
											</if>
												<td><small>{$vo.createtime}</small></td>
												<td><small>
													<i class="fa fa-dot-circle-o"></i> {$vo.gwxid}
													<br>
													<i class="fa fa-circle-o"></i>  {$vo.gwxname}
													</small>
												</td>
												<td><small>{$vo.projectname}</small></td>
												<td><small>{$vo.g_deadline}</small></td>
												<td>
													<small>
														<i class="fa fa-angle-right"></i> {$vo.totalprice}{$vo.moneytype}
														<br>
														<i class="fa fa-angle-right"></i> {$vo.guarantee}{$vo.moneytype}
													</small>
													<br>
													<switch name="vo.g_state">
														<case value="0" break="1"><span class="label label-sm label-danger"><i class="fa fa-volume-up"></i> No gurrentee</span></case>
														<case value="1"><span class="label label-sm label-danger"><i class="fa fa-volume-up"></i> Only gurrentee</span></case>
														<default /><span class="label label-sm label-success"><i class="fa fa-volume-up"></i> Have paid All</span>
													</switch>
												</td>
												<td>
													<small>
														<if condition="$vo.wxid neq '' ">
															<i class="fa fa-dot-circle-o"></i>  {$vo.wxid}
															<br>
															<i class="fa fa-circle-o"></i>  {$vo.wxname}
														<else />
															<span class="label label-sm label-default"> unset </span>
														</if>
													</small>
												</td>
												<td>
													<small>
														<if condition="$vo.w_deadline neq '' ">
															{$vo.w_deadline}
														<else />
															<span class="label label-sm label-default"> unset </span>
														</if>
													</small>
												</td>
												<td>
													<small>
														<if condition="$vo.w_payment neq '' ">
															<i class="fa fa-angle-right"></i> {$vo.w_payment}RMB
														<else />
															<i class="fa fa-angle-right"></i> <span class="label label-sm label-default"> unset </span>
														</if>
													</small>
													<br>
													<switch name="vo.w_state">
														<case value="1"><span class="label label-sm label-danger"><i class="fa fa-volume-up"></i>  doing</span></case>
														<case value="2"><span class="label label-sm label-danger"><i class="fa fa-volume-up"></i>  done & no paid</span></case>
														<case value="3"><span class="label label-sm label-success"><i class="fa fa-volume-up"></i>  done & paid</span></case>
														<default /><span class="label label-sm label-default"><i class="fa fa-volume-up"></i> unset </span>
													</switch>
												</td>
												<td>
													<if condition="$vo.description neq '' ">
														<a href="{:U('Order/orderdetailpage?orderid='.$vo['orderid'].'');}" class="btn btn-xs yellow">
															<i class="fa fa-list-ul">
															</i>
														</a>
													<else />
														<a href="{:U('Order/orderdetailpage?orderid='.$vo['orderid'].'');}" class="btn btn-xs yellow">
															<i class="fa fa-search">

															</i>
														</a>
													</if>
													<a class="btn  btn-xs red" href="{:U('Order/ordereditpage?orderid='.$vo['orderid'].'');}">
														<i class="fa fa-edit"></i>
													</a>
													<a class="btn btn-xs purple" href="#confirmModal{$vo['orderid']}" data-toggle="modal">
														<i class="fa fa-times"></i>
													</a>
														<div class="modal fade modal-overflow in" id="confirmModal{$vo['orderid']}" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;">
															<div class="modal-dialog">
																<div class="modal-content">
																	<div class="modal-header">
																		<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
																		<h4 class="modal-title">Delete warning</h4>
																	</div>
																	<div class="modal-body">
																		<p>Are you sure to delete this order: #{$vo['orderid']} ?</p>

																	</div>
																	<div class="modal-footer">
																		<a class="btn default" data-dismiss="modal"> Cancel </a>
																		<a href="{:U('Order/orderdelete?orderid='.$vo['orderid'].'');}" type="button" class="btn blue"> Delete </a>
																	</div>
																</div>
																<!-- /.modal-content -->
															</div>
														<!-- /.modal-dialog -->
														</div>
													<if condition="($vo.g_state eq 2) AND ($vo.w_state eq 3) ">
														<a class="btn btn-xs green" data-target="#stack{$vo['orderid']}" data-toggle="modal">
															<i class="fa fa-comment-o"></i>
														</a>
													</if>

													<div class="modal fade modal-overflow in" id="stack{$vo['orderid']}" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;">
														<div class="modal-dialog">
															<div class="modal-content">
																<div class="modal-header">
																	<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
																	<h4 class="modal-title">Remark</h4>
																</div>
																<form action="{:U('Order/orderremark?orderid='.$vo['orderid'].'');}" method="post"  role="form">
																<div class="modal-body">
																	<div class="form-group">
																		<if condition="$vo.gremark eq 5">
																			<input  data-tabindex="1" type="radio" name="remarkoption" value="5" checked/>
																		<else />
																			<input  data-tabindex="1" type="radio" name="remarkoption" value="5" />
																		</if>
																		<i class="fa fa-star font-yellow"></i><i class="fa fa-star font-yellow"></i><i class="fa fa-star font-yellow"></i><i class="fa fa-star font-yellow"></i><i class="fa fa-star font-yellow"></i> 5
																	</div>
																	<div class="form-group">
																		<if condition="$vo.gremark eq 4">
																			<input  data-tabindex="2" type="radio" name="remarkoption" value="4" checked/>
																		<else />
																			<input  data-tabindex="2" type="radio" name="remarkoption" value="4" />
																		</if>
																		<i class="fa fa-star font-yellow"></i><i class="fa fa-star font-yellow"></i><i class="fa fa-star font-yellow"></i><i class="fa fa-star font-yellow"></i> 4
																	</div>
																	<div class="form-group">
																		<if condition="$vo.gremark eq 3">
																			<input  data-tabindex="3" type="radio" name="remarkoption" value="3" checked/>
																		<else />
																			<input  data-tabindex="3" type="radio" name="remarkoption" value="3" />
																		</if>
																		<i class="fa fa-star font-yellow"></i><i class="fa fa-star font-yellow"></i><i class="fa fa-star font-yellow"></i> 3
																	</div>
																	<div class="form-group">
																		<if condition="$vo.gremark eq 2">
																			<input  data-tabindex="4" type="radio" name="remarkoption" value="2" checked/>
																		<else />
																			<input  data-tabindex="4" type="radio" name="remarkoption" value="2" />
																		</if>
																		<i class="fa fa-star font-yellow"></i><i class="fa fa-star font-yellow"></i> 2
																	</div>
																	<div class="form-group">
																		<if condition="$vo.gremark eq 1">
																			<input  data-tabindex="5" type="radio" name="remarkoption" value="1" checked/>
																		<else />
																			<input  data-tabindex="5" type="radio" name="remarkoption" value="1" />
																		</if>
																		<i class="fa fa-star font-yellow"></i> 1
																	</div>
																	<div class="form-group">
																		<if condition="$vo.gremark eq 0">
																			<input  data-tabindex="6" type="radio" name="remarkoption" value="0" checked/>
																		<else />
																			<input  data-tabindex="6" type="radio" name="remarkoption" value="0" />
																		</if>
																		<i class="fa fa-star-o font-yellow"></i> 0
																	</div>

																</div>
																<div class="modal-footer">
																	<button type="submit" class="btn blue"> Remark </button>
																	<a class="btn default" data-dismiss="modal"> Cancel </a>
																</div>
																</form>
															</div>
															<!-- /.modal-content -->
														</div>
													<!-- /.modal-dialog -->
													</div>
												</td>
											</tr>
										</foreach>
									</tbody>
									</table>
								</div>
								<div class="row page">
									{$page}
								</div>

							</div>
						</div>
					</div>
					<!-- End: life time stats -->
				</div>
			</div>
			<!-- END PAGE CONTENT-->
		</div>
</block>
<block name="footscript">
	<!-- BEGIN PAGE LEVEL PLUGINS -->
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/select2/select2.min.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/datatables/media/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js"></script>
	<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
	<!-- END PAGE LEVEL PLUGINS -->
	<!-- BEGIN PAGE LEVEL SCRIPTS -->
	<!-- BEGIN PAGE LEVEL PLUGINS -->
<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/clockface/js/clockface.js"></script>
<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-daterangepicker/moment.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-daterangepicker/daterangepicker.js"></script>
<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.js"></script>
<script type="text/javascript" src="__PUBLIC__/metronic3_7/assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="__PUBLIC__/metronic3_7/assets/global/scripts/metronic.js" type="text/javascript"></script>
<script src="__PUBLIC__/metronic3_7/assets/admin/layout/scripts/layout.js" type="text/javascript"></script>
<script src="__PUBLIC__/metronic3_7/assets/admin/pages/scripts/components-pickers.js"></script>
<script src="__PUBLIC__/metronic3_7/assets/global/scripts/metronic.js" type="text/javascript"></script>
<script src="__PUBLIC__/metronic3_7/assets/admin/layout/scripts/layout.js" type="text/javascript"></script>
<script src="__PUBLIC__/metronic3_7/assets/admin/layout/scripts/quick-sidebar.js" type="text/javascript"></script>
<script src="__PUBLIC__/metronic3_7/assets/admin/layout/scripts/demo.js" type="text/javascript"></script>
<script src="__PUBLIC__/metronic3_7/assets/admin/pages/scripts/components-pickers.js"></script>

	<!-- END PAGE LEVEL SCRIPTS -->
	<script>
		jQuery(document).ready(function() {
			// initiate layout and plugins
			Metronic.init(); // init metronic core components
			Layout.init(); // init current layout
			Demo.init(); // init demo features
			ComponentsPickers.init();
        });
		</script>
</block>
